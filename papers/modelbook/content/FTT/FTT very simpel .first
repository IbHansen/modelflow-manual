{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {
    "slideshow": {
     "slide_type": "slide"
    }
   },
   "source": [
    "# A stylized FTT model. Specified in Latex "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## A Future Technology Transformations (FTT) model \n",
    "Future Technology Transformations (FTT) is a framework for technology diffusion model based on simulation rather than optimization approach that is more commonly used. The FTT framework currently exists for power, road transport, steel and heating sectors \n",
    "\n",
    "Original paper:  [Mercure, J.-F. et al. The dynamics of technology diffusion and the impacts of climate policy instruments in the decarbonisation of the global electricity sector. Energy Policy 73, 686â€“700.](https://www.sciencedirect.com/science/article/pii/S0301421514004017)\n",
    "\n",
    "The model below is a very simple version. The purpose is to show some of the properties and how to set up an model in Latex  "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Modelflow\n",
    "For more information on modelflow please look [here](https://ibhansen.github.io/mfbook/content/introduction.html)  "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "slideshow": {
     "slide_type": "subslide"
    }
   },
   "source": [
    "## Why specify a model in Latex? \n",
    "\n",
    "Sometime the **implementation** of a model in software don't match the **specification** of the model in \n",
    "the text in which the model is presented. It can be a challenge to make sure that the specification is \n",
    "updated in order to reflect changes made in the implementation. \n",
    "\n",
    "By extracting the model from a Latex script which describes and specify the model, one can always be sure that simulations reflect the model as described in the paper. \n",
    "\n",
    "Also the author is forced to make a complete specification of the model, else it won't run. "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "slideshow": {
     "slide_type": "skip"
    }
   },
   "source": [
    "## Import libraries "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "```{note}\n",
    "This notebook will not render nice in Colab \n",
    "\n",
    "Because of limitations in Jupyterbook - which is used for creating this book - the latex input is input twice. That is not nessecary for use in an notebook. \n",
    "```"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {
    "tags": [
     "remove-cell"
    ]
   },
   "outputs": [],
   "source": [
    "#This is code to manage dependencies if the notebook is executed in the google colab cloud service\n",
    "if 'google.colab' in str(get_ipython()):\n",
    "  import os\n",
    "  os.system('apt -qqq install graphviz')\n",
    "  os.system('pip -qqq install ModelFlowIb ipysheet  --no-dependencies ')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {
    "scrolled": false,
    "slideshow": {
     "slide_type": "skip"
    }
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "        <style>\n",
       "            div#notebook-container    { width: 95%; }\n",
       "            div#menubar-container     { width: 65%; }\n",
       "            div#maintoolbar-container { width: 99%; }\n",
       "        </style>\n",
       "        "
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "%load_ext autoreload\n",
    "%autoreload 2\n",
    "import pandas as pd\n",
    "from IPython.core.display import HTML,Markdown,Latex\n",
    "\n",
    "\n",
    "from modelclass import model\n",
    "import modeljupytermagic\n",
    "\n",
    "# some useful stuf\n",
    "model.widescreen()\n",
    "pd.set_option('display.max_rows', None, 'display.max_columns', 10, 'display.precision', 4)\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "slideshow": {
     "slide_type": "slide"
    }
   },
   "source": [
    "## Write a latex script  \n",
    "The model consists of the equations and the lists   \n",
    "\n",
    "The jupyter magic command **%%latexflow** will extract the model. then it will  transform the equations to **ModelFlow** equations and finaly it will create a modelflow **model** instance.   \n",
    "\n",
    "In the following cell the modelinstance wil be called **mftt**. It will be able to solve the model. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {
    "slideshow": {
     "slide_type": "fragment"
    }
   },
   "outputs": [],
   "source": [
    "%%latexflow mftt  \n",
    "\n",
    "A very simple FTT model. \n",
    "\n",
    "Two lists of technology  are defined: \n",
    "    \n",
    "List $i =\\{t1, t2, t3\\}$\n",
    "\n",
    "List $j = \\{t1, t2, t3\\}$\n",
    "\n",
    "\n",
    "\n",
    "\\begin{equation}\n",
    "\\label{eq:SHARES2}\n",
    "\\Delta Share^{i} = \\sum_{j}(Share^{i} \\times Share^{j} \\times\n",
    "                            (\\underbrace{F^{i,j}}_{Preferences}/\\underbrace{\\tau^{j}}_{Life expectancy}\n",
    "                             - F^{j,i}/\\tau^{i}))\n",
    "\\end{equation}\n",
    "\n",
    "\n",
    "\\begin{equation}\n",
    "\\label{eq:preferences}\n",
    "\\underbrace{F^{i,j}}_{Preferences} = \\frac{1}{\n",
    "1+exp(\n",
    "    \\frac{(C^{i}-C^{j})}{\\sigma^{i,j}} )}\n",
    "\\end{equation}\n",
    "\n",
    "\\begin{equation}\n",
    "\\label{eq:sigma}\n",
    "\\sigma^{i,j} = \\sqrt{\\sigma^{i}**2 \\times \\sigma^{j}**2}\n",
    "\\end{equation}\n",
    "\n",
    "\n",
    "\n",
    "\\begin{equation}\n",
    "\\label{eq:UD}\n",
    "UsefulDemand^{i} = Share^{i} \\times UsefulDemand\\_total \n",
    "\\end{equation}\n",
    "\n",
    "\\begin{equation}\n",
    "\\label{eq:UD_total}\n",
    "UsefulDemand\\_total  = UsefulDemand\\_total_{t-1} \\times \n",
    "(1+\\frac{UsefulDemand\\_total\\_growth}{100})\n",
    "\\end{equation}\n",
    "\n",
    "To check, that the shares add up to one. \n",
    "\n",
    "\\begin{equation}\n",
    "\\label{eq:check_shares}\n",
    "Share\\_total  = \\sum_{i}(Share\\_{i})\n",
    "\\end{equation}\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## the %%latexflow cell will extract the equations from the script \n",
    "and create a modelinstance which is named: **mftt**"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## This text will render like this\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {
    "tags": [
     "remove-cell"
    ]
   },
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "\n",
       "A very simple FTT model. \n",
       "\n",
       "Two lists of technology  are defined: \n",
       "    \n",
       "List $i =\\{t1, t2, t3\\}$\n",
       "\n",
       "List $j = \\{t1, t2, t3\\}$\n",
       "\n",
       "\n",
       "\n",
       "\\begin{equation}\n",
       "\\label{eq:SHARES2}\n",
       "\\Delta Share^{i} = \\sum_{j}(Share^{i} \\times Share^{j} \\times\n",
       "                            (\\underbrace{F^{i,j}}_{Preferences}/\\underbrace{\\tau^{j}}_{Life expectancy}\n",
       "                             - F^{j,i}/\\tau^{i}))\n",
       "\\end{equation}\n",
       "\n",
       "\n",
       "\\begin{equation}\n",
       "\\label{eq:preferences}\n",
       "\\underbrace{F^{i,j}}_{Preferences} = \\frac{1}{\n",
       "1+exp(\n",
       "    \\frac{(C^{i}-C^{j})}{\\sigma^{i,j}} )}\n",
       "\\end{equation}\n",
       "\n",
       "\\begin{equation}\n",
       "\\label{eq:sigma}\n",
       "\\sigma^{i,j} = \\sqrt{\\sigma^{i}**2 \\times \\sigma^{j}**2}\n",
       "\\end{equation}\n",
       "\n",
       "\n",
       "\n",
       "\\begin{equation}\n",
       "\\label{eq:UD}\n",
       "UsefulDemand^{i} = Share^{i} \\times UsefulDemand\\_total \n",
       "\\end{equation}\n",
       "\n",
       "\\begin{equation}\n",
       "\\label{eq:UD_total}\n",
       "UsefulDemand\\_total  = UsefulDemand\\_total_{t-1} \\times \n",
       "(1+\\frac{UsefulDemand\\_total\\_growth}{100})\n",
       "\\end{equation}\n",
       "\n",
       "To check, that the shares add up to one. \n",
       "\n",
       "\\begin{equation}\n",
       "\\label{eq:check_shares}\n",
       "Share\\_total  = \\sum_{i}(Share\\_{i})\n",
       "\\end{equation}\n"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "display(Markdown(mftt.equations_latex))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "scrolled": false,
    "slideshow": {
     "slide_type": "fragment"
    }
   },
   "source": [
    "%%latexflow mftt display render\n",
    "\n",
    "A very simple FTT model. \n",
    "\n",
    "Two lists of technology  are defined: \n",
    "    \n",
    "List $i =\\{technology1, technology2, technology3\\}$\n",
    "\n",
    "List $j = \\{technology1, technology2, technology3\\}$\n",
    "\n",
    "\n",
    "$$\n",
    "\\begin{equation}\n",
    "\\label{eq:SHARES2}\n",
    "\\Delta Share^{i} = \\sum_{j}(Share^{i} \\times Share^{j} \\times\n",
    "                            (\\underbrace{F^{i,j}}_{Preferences}/\\underbrace{\\tau^{j}}_{Life expectancy}\n",
    "                             - F^{j,i}/\\tau^{i}))\n",
    "\\end{equation}\n",
    "$$\n",
    "\n",
    "\\begin{equation}\n",
    "\\label{eq:preferences}\n",
    "\\underbrace{F^{i,j}}_{Preferences} = \\frac{1}{\n",
    "1+exp(\n",
    "    \\frac{(C^{i}-C^{j})}{\\sigma^{i,j}} )}\n",
    "\\end{equation}\n",
    "\n",
    "\\begin{equation}\n",
    "\\label{eq:sigma}\n",
    "\\sigma^{i,j} = \\sqrt{\\sigma^{i}**2 \\times \\sigma^{j}**2}\n",
    "\\end{equation}\n",
    "\n",
    "\n",
    "\n",
    "\\begin{equation}\n",
    "\\label{eq:UD}\n",
    "UsefulDemand^{i} = Share^{i} \\times UsefulDemand\\_total \n",
    "\\end{equation}\n",
    "\n",
    "\\begin{equation}\n",
    "\\label{eq:UD_total}\n",
    "UsefulDemand\\_total  = UsefulDemand\\_total_{t-1} \\times \n",
    "(1+\\frac{UsefulDemand\\_total\\_growth}{100})\n",
    "\\end{equation}\n",
    "\n",
    "To check, that the shares add up to one. \n",
    "\n",
    "\\begin{equation}\n",
    "\\label{eq:check_shares}\n",
    "Share\\_total  = \\sum_{i}(Share\\_{i})\n",
    "\\end{equation}\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## The latex script is first transpiled to a  template model"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Do i $ \n",
      " Frml SHARES2 diff(Share_{i})  = sum(j,Share_{i}*Share_{j}*(F_{i}_{j}/tau_{j}-F_{j}_{i}/tau_{i})) $ \n",
      "enddo $ \n",
      "Do i $ Do j $ \n",
      " Frml preferences F_{i}_{j}  = ((1)/(1+exp((((C_{i}-C_{j}))/(sigma_{i}_{j}))))) $ \n",
      "enddo $ enddo $ \n",
      "Do i $ Do j $ \n",
      " Frml sigma sigma_{i}_{j}  = sqrt(sigma_{i}**2*sigma_{j}**2) $ \n",
      "enddo $ enddo $ \n",
      "Do i $ \n",
      " Frml UD UsefulDemand_{i}  = Share_{i}*UsefulDemand_total $ \n",
      "enddo $ \n",
      "Frml UD_total UsefulDemand_total   = UsefulDemand_total(-1)*(1+((UsefulDemand_total_growth)/(100))) $ \n",
      "Frml check_shares Share_total   = sum(i,Share_{i}) $ \n",
      "LIST I  =  I  : T1  T2  T3$\n",
      "LIST J  =  J  :  T1  T2  T3$\n"
     ]
    }
   ],
   "source": [
    "print(mftt.equations_original)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Then the template model is expanded to a Business language model"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "FRML SHARES2 SHARE_T1=SHARE_T1(-1)+((SHARE_T1*SHARE_T1*(F_T1_T1/TAU_T1-F_T1_T1/TAU_T1)+SHARE_T1*SHARE_T2*(F_T1_T2/TAU_T2-F_T2_T1/TAU_T1)+SHARE_T1*SHARE_T3*(F_T1_T3/TAU_T3-F_T3_T1/TAU_T1)))$\n",
      "FRML SHARES2 SHARE_T2=SHARE_T2(-1)+((SHARE_T2*SHARE_T1*(F_T2_T1/TAU_T1-F_T1_T2/TAU_T2)+SHARE_T2*SHARE_T2*(F_T2_T2/TAU_T2-F_T2_T2/TAU_T2)+SHARE_T2*SHARE_T3*(F_T2_T3/TAU_T3-F_T3_T2/TAU_T2)))$\n",
      "FRML SHARES2 SHARE_T3=SHARE_T3(-1)+((SHARE_T3*SHARE_T1*(F_T3_T1/TAU_T1-F_T1_T3/TAU_T3)+SHARE_T3*SHARE_T2*(F_T3_T2/TAU_T2-F_T2_T3/TAU_T3)+SHARE_T3*SHARE_T3*(F_T3_T3/TAU_T3-F_T3_T3/TAU_T3)))$\n",
      "FRML PREFERENCES F_T1_T1  = ((1)/(1+EXP((((C_T1-C_T1))/(SIGMA_T1_T1))))) $\n",
      "FRML PREFERENCES F_T1_T2  = ((1)/(1+EXP((((C_T1-C_T2))/(SIGMA_T1_T2))))) $\n",
      "FRML PREFERENCES F_T1_T3  = ((1)/(1+EXP((((C_T1-C_T3))/(SIGMA_T1_T3))))) $\n",
      "FRML PREFERENCES F_T2_T1  = ((1)/(1+EXP((((C_T2-C_T1))/(SIGMA_T2_T1))))) $\n",
      "FRML PREFERENCES F_T2_T2  = ((1)/(1+EXP((((C_T2-C_T2))/(SIGMA_T2_T2))))) $\n",
      "FRML PREFERENCES F_T2_T3  = ((1)/(1+EXP((((C_T2-C_T3))/(SIGMA_T2_T3))))) $\n",
      "FRML PREFERENCES F_T3_T1  = ((1)/(1+EXP((((C_T3-C_T1))/(SIGMA_T3_T1))))) $\n",
      "FRML PREFERENCES F_T3_T2  = ((1)/(1+EXP((((C_T3-C_T2))/(SIGMA_T3_T2))))) $\n",
      "FRML PREFERENCES F_T3_T3  = ((1)/(1+EXP((((C_T3-C_T3))/(SIGMA_T3_T3))))) $\n",
      "FRML SIGMA SIGMA_T1_T1  = SQRT(SIGMA_T1**2*SIGMA_T1**2) $\n",
      "FRML SIGMA SIGMA_T1_T2  = SQRT(SIGMA_T1**2*SIGMA_T2**2) $\n",
      "FRML SIGMA SIGMA_T1_T3  = SQRT(SIGMA_T1**2*SIGMA_T3**2) $\n",
      "FRML SIGMA SIGMA_T2_T1  = SQRT(SIGMA_T2**2*SIGMA_T1**2) $\n",
      "FRML SIGMA SIGMA_T2_T2  = SQRT(SIGMA_T2**2*SIGMA_T2**2) $\n",
      "FRML SIGMA SIGMA_T2_T3  = SQRT(SIGMA_T2**2*SIGMA_T3**2) $\n",
      "FRML SIGMA SIGMA_T3_T1  = SQRT(SIGMA_T3**2*SIGMA_T1**2) $\n",
      "FRML SIGMA SIGMA_T3_T2  = SQRT(SIGMA_T3**2*SIGMA_T2**2) $\n",
      "FRML SIGMA SIGMA_T3_T3  = SQRT(SIGMA_T3**2*SIGMA_T3**2) $\n",
      "FRML UD USEFULDEMAND_T1  = SHARE_T1*USEFULDEMAND_TOTAL $\n",
      "FRML UD USEFULDEMAND_T2  = SHARE_T2*USEFULDEMAND_TOTAL $\n",
      "FRML UD USEFULDEMAND_T3  = SHARE_T3*USEFULDEMAND_TOTAL $\n",
      "FRML UD_TOTAL USEFULDEMAND_TOTAL   = USEFULDEMAND_TOTAL(-1)*(1+((USEFULDEMAND_TOTAL_GROWTH)/(100))) $\n",
      "FRML CHECK_SHARES SHARE_TOTAL   = (SHARE_T1+SHARE_T2+SHARE_T3) $\n",
      "LIST I  =  I  : T1  T2  T3$\n",
      "LIST J  =  J  :  T1  T2  T3$\n"
     ]
    }
   ],
   "source": [
    "print(mftt.equations)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## And we can inspect the structure"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/svg+xml": [
       "<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"1080pt\" height=\"681pt\" viewBox=\"0.00 0.00 1080.00 681.28\">\n",
       "<g id=\"graph0\" class=\"graph\" transform=\"scale(0.798817 0.798817) rotate(0) translate(4 848.87)\">\n",
       "<title>TD</title>\n",
       "<polygon fill=\"white\" stroke=\"none\" points=\"-4,4 -4,-848.87 1348,-848.87 1348,4 -4,4\"/>\n",
       "<text text-anchor=\"middle\" x=\"672\" y=\"-7.8\" font-family=\"Times New Roman,serif\" font-size=\"14.00\">A_model_graph</text>\n",
       "<!-- USEFULDEMAND_TOTAL(&#45;1) -->\n",
       "<g id=\"node1\" class=\"node\">\n",
       "<title>USEFULDEMAND_TOTAL(-1)</title>\n",
       "<g id=\"a_node1\"><a xlink:title=\"USEFULDEMAND_TOTAL\n",
       "FRML UD_TOTAL USEFULDEMAND_TOTAL Â Â = USEFULDEMAND_TOTAL(-1)*(1+((USEFULDEMAND_TOTAL_GROWTH)/(100))) $\">\n",
       "<polygon fill=\"springgreen\" stroke=\"black\" points=\"720,-790.87 361,-790.87 361,-754.87 720,-754.87 720,-790.87\"/>\n",
       "<text text-anchor=\"start\" x=\"367.5\" y=\"-768.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">USEFULDEMAND_TOTAL(-1):USEFULDEMAND_TOTAL</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- USEFULDEMAND_TOTAL -->\n",
       "<g id=\"node38\" class=\"node\">\n",
       "<title>USEFULDEMAND_TOTAL</title>\n",
       "<g id=\"a_node38\"><a xlink:title=\"USEFULDEMAND_TOTAL\n",
       "FRML UD_TOTAL USEFULDEMAND_TOTAL Â Â = USEFULDEMAND_TOTAL(-1)*(1+((USEFULDEMAND_TOTAL_GROWTH)/(100))) $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"934,-771.87 756,-771.87 756,-735.87 934,-735.87 934,-771.87\"/>\n",
       "<text text-anchor=\"start\" x=\"762\" y=\"-749.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">USEFULDEMAND_TOTAL:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- USEFULDEMAND_TOTAL(&#45;1)&#45;&gt;USEFULDEMAND_TOTAL -->\n",
       "<g id=\"edge59\" class=\"edge\">\n",
       "<title>USEFULDEMAND_TOTAL(-1)-&gt;USEFULDEMAND_TOTAL</title>\n",
       "<g id=\"a_edge59\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M720.09,-755C728.63,-754.52 737.05,-754.09 745.23,-753.7\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"745.26,-757.2 755.09,-753.24 744.94,-750.21 745.26,-757.2\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T1(&#45;1) -->\n",
       "<g id=\"node2\" class=\"node\">\n",
       "<title>SHARE_T1(-1)</title>\n",
       "<g id=\"a_node2\"><a xlink:title=\"SHARE_T1\n",
       "FRML SHARES2 SHARE_T1=SHARE_T1(-1)+((SHARE_T1*SHARE_T1*(F_T1_T1/TAU_T1-F_T1_T1/TAU_T1)+SHARE_T1*SHARE_T2*(F_T1_T2/TAU_T2-F_T2_T1/TAU_T1)+SHARE_T1*SHARE_T3*(F_T1_T3/TAU_T3-F_T3_T1/TAU_T1)))$\">\n",
       "<polygon fill=\"springgreen\" stroke=\"black\" points=\"1344,-412.87 1175,-412.87 1175,-376.87 1344,-376.87 1344,-412.87\"/>\n",
       "<text text-anchor=\"start\" x=\"1181.5\" y=\"-390.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">SHARE_T1(-1):SHARE_T1</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T1 -->\n",
       "<g id=\"node33\" class=\"node\">\n",
       "<title>SHARE_T1</title>\n",
       "<g id=\"a_node33\"><a xlink:title=\"SHARE_T1\n",
       "FRML SHARES2 SHARE_T1=SHARE_T1(-1)+((SHARE_T1*SHARE_T1*(F_T1_T1/TAU_T1-F_T1_T1/TAU_T1)+SHARE_T1*SHARE_T2*(F_T1_T2/TAU_T2-F_T2_T1/TAU_T1)+SHARE_T1*SHARE_T3*(F_T1_T3/TAU_T3-F_T3_T1/TAU_T1)))$\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"1095.5,-412.87 1013.5,-412.87 1013.5,-376.87 1095.5,-376.87 1095.5,-412.87\"/>\n",
       "<text text-anchor=\"start\" x=\"1019.5\" y=\"-390.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">SHARE_T1:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T1(&#45;1)&#45;&gt;SHARE_T1 -->\n",
       "<g id=\"edge10\" class=\"edge\">\n",
       "<title>SHARE_T1(-1)-&gt;SHARE_T1</title>\n",
       "<g id=\"a_edge10\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M1174.82,-401.52C1151.5,-401.77 1126.88,-401.53 1106.1,-400.8\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"1106.5,-397.31 1096.36,-400.4 1106.21,-404.3 1106.5,-397.31\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T2_T3 -->\n",
       "<g id=\"node3\" class=\"node\">\n",
       "<title>F_T2_T3</title>\n",
       "<g id=\"a_node3\"><a xlink:title=\"F_T2_T3\n",
       "FRML PREFERENCES F_T2_T3 Â = ((1)/(1+EXP((((C_T2-C_T3))/(SIGMA_T2_T3))))) $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"325,-440.87 258,-440.87 258,-404.87 325,-404.87 325,-440.87\"/>\n",
       "<text text-anchor=\"start\" x=\"264.5\" y=\"-418.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">F_T2_T3:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T3 -->\n",
       "<g id=\"node19\" class=\"node\">\n",
       "<title>SHARE_T3</title>\n",
       "<g id=\"a_node19\"><a xlink:title=\"SHARE_T3\n",
       "FRML SHARES2 SHARE_T3=SHARE_T3(-1)+((SHARE_T3*SHARE_T1*(F_T3_T1/TAU_T1-F_T1_T3/TAU_T3)+SHARE_T3*SHARE_T2*(F_T3_T2/TAU_T2-F_T2_T3/TAU_T3)+SHARE_T3*SHARE_T3*(F_T3_T3/TAU_T3-F_T3_T3/TAU_T3)))$\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"886,-522.87 804,-522.87 804,-486.87 886,-486.87 886,-522.87\"/>\n",
       "<text text-anchor=\"start\" x=\"810\" y=\"-500.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">SHARE_T3:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T2_T3&#45;&gt;SHARE_T3 -->\n",
       "<g id=\"edge2\" class=\"edge\">\n",
       "<title>F_T2_T3-&gt;SHARE_T3</title>\n",
       "<g id=\"a_edge2\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M325.38,-425.93C397.27,-432.86 573.74,-451.18 720,-476.87 744.3,-481.13 771.03,-487.01 793.42,-492.29\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"792.44,-495.65 802.97,-494.56 794.06,-488.84 792.44,-495.65\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T2 -->\n",
       "<g id=\"node28\" class=\"node\">\n",
       "<title>SHARE_T2</title>\n",
       "<g id=\"a_node28\"><a xlink:title=\"SHARE_T2\n",
       "FRML SHARES2 SHARE_T2=SHARE_T2(-1)+((SHARE_T2*SHARE_T1*(F_T2_T1/TAU_T1-F_T1_T2/TAU_T2)+SHARE_T2*SHARE_T2*(F_T2_T2/TAU_T2-F_T2_T2/TAU_T2)+SHARE_T2*SHARE_T3*(F_T2_T3/TAU_T3-F_T3_T2/TAU_T2)))$\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"581.5,-224.87 499.5,-224.87 499.5,-188.87 581.5,-188.87 581.5,-224.87\"/>\n",
       "<text text-anchor=\"start\" x=\"505.5\" y=\"-202.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">SHARE_T2:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T2_T3&#45;&gt;SHARE_T2 -->\n",
       "<g id=\"edge60\" class=\"edge\">\n",
       "<title>F_T2_T3-&gt;SHARE_T2</title>\n",
       "<g id=\"a_edge60\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M314.6,-404.65C318.09,-401.73 321.66,-398.73 325,-395.87 392.39,-338.21 470.21,-268.96 511.07,-232.39\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"513.29,-235.1 518.4,-225.82 508.62,-229.88 513.29,-235.1\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- USEFULDEMAND_TOTAL_GROWTH -->\n",
       "<g id=\"node4\" class=\"node\">\n",
       "<title>USEFULDEMAND_TOTAL_GROWTH</title>\n",
       "<g id=\"a_node4\"><a xlink:title=\"USEFULDEMAND_TOTAL_GROWTH\n",
       "Exogen\">\n",
       "<polygon fill=\"yellow\" stroke=\"black\" points=\"662.5,-844.87 418.5,-844.87 418.5,-808.87 662.5,-808.87 662.5,-844.87\"/>\n",
       "<text text-anchor=\"start\" x=\"424.5\" y=\"-822.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">USEFULDEMAND_TOTAL_GROWTH:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- USEFULDEMAND_TOTAL_GROWTH&#45;&gt;USEFULDEMAND_TOTAL -->\n",
       "<g id=\"edge23\" class=\"edge\">\n",
       "<title>USEFULDEMAND_TOTAL_GROWTH-&gt;USEFULDEMAND_TOTAL</title>\n",
       "<g id=\"a_edge23\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M662.68,-811.97C681.99,-808.61 701.64,-804.61 720,-799.87 743.8,-793.72 769.38,-784.67 791.08,-776.22\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"792.37,-779.48 800.38,-772.55 789.79,-772.97 792.37,-779.48\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T1_T1 -->\n",
       "<g id=\"node5\" class=\"node\">\n",
       "<title>SIGMA_T1_T1</title>\n",
       "<g id=\"a_node5\"><a xlink:title=\"SIGMA_T1_T1\n",
       "FRML SIGMA SIGMA_T1_T1 Â = SQRT(SIGMA_T1**2*SIGMA_T1**2) $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"222,-332.87 118,-332.87 118,-296.87 222,-296.87 222,-332.87\"/>\n",
       "<text text-anchor=\"start\" x=\"124\" y=\"-310.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">SIGMA_T1_T1:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T1_T1 -->\n",
       "<g id=\"node8\" class=\"node\">\n",
       "<title>F_T1_T1</title>\n",
       "<g id=\"a_node8\"><a xlink:title=\"F_T1_T1\n",
       "FRML PREFERENCES F_T1_T1 Â = ((1)/(1+EXP((((C_T1-C_T1))/(SIGMA_T1_T1))))) $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"325,-386.87 258,-386.87 258,-350.87 325,-350.87 325,-386.87\"/>\n",
       "<text text-anchor=\"start\" x=\"264.5\" y=\"-364.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">F_T1_T1:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T1_T1&#45;&gt;F_T1_T1 -->\n",
       "<g id=\"edge26\" class=\"edge\">\n",
       "<title>SIGMA_T1_T1-&gt;F_T1_T1</title>\n",
       "<g id=\"a_edge26\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M211.79,-333.3C223.52,-338.6 236.33,-344.39 248.15,-349.73\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"246.55,-352.85 257.11,-353.78 249.44,-346.47 246.55,-352.85\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T1_T3 -->\n",
       "<g id=\"node6\" class=\"node\">\n",
       "<title>SIGMA_T1_T3</title>\n",
       "<g id=\"a_node6\"><a xlink:title=\"SIGMA_T1_T3\n",
       "FRML SIGMA SIGMA_T1_T3 Â = SQRT(SIGMA_T1**2*SIGMA_T3**2) $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"222,-548.87 118,-548.87 118,-512.87 222,-512.87 222,-548.87\"/>\n",
       "<text text-anchor=\"start\" x=\"124\" y=\"-526.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">SIGMA_T1_T3:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T1_T3 -->\n",
       "<g id=\"node26\" class=\"node\">\n",
       "<title>F_T1_T3</title>\n",
       "<g id=\"a_node26\"><a xlink:title=\"F_T1_T3\n",
       "FRML PREFERENCES F_T1_T3 Â = ((1)/(1+EXP((((C_T1-C_T3))/(SIGMA_T1_T3))))) $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"325,-602.87 258,-602.87 258,-566.87 325,-566.87 325,-602.87\"/>\n",
       "<text text-anchor=\"start\" x=\"264.5\" y=\"-580.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">F_T1_T3:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T1_T3&#45;&gt;F_T1_T3 -->\n",
       "<g id=\"edge1\" class=\"edge\">\n",
       "<title>SIGMA_T1_T3-&gt;F_T1_T3</title>\n",
       "<g id=\"a_edge1\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M211.79,-549.3C223.52,-554.6 236.33,-560.39 248.15,-565.73\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"246.55,-568.85 257.11,-569.78 249.44,-562.47 246.55,-568.85\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- C_T1 -->\n",
       "<g id=\"node7\" class=\"node\">\n",
       "<title>C_T1</title>\n",
       "<g id=\"a_node7\"><a xlink:title=\"C_T1\n",
       "Exogen\">\n",
       "<polygon fill=\"yellow\" stroke=\"black\" points=\"197,-386.87 143,-386.87 143,-350.87 197,-350.87 197,-386.87\"/>\n",
       "<text text-anchor=\"start\" x=\"153\" y=\"-364.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">C_T1:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- C_T1&#45;&gt;F_T1_T1 -->\n",
       "<g id=\"edge71\" class=\"edge\">\n",
       "<title>C_T1-&gt;F_T1_T1</title>\n",
       "<g id=\"a_edge71\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M197.22,-368.87C211.88,-368.87 230.51,-368.87 247.26,-368.87\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"247.18,-372.37 257.18,-368.87 247.18,-365.37 247.18,-372.37\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T3_T1 -->\n",
       "<g id=\"node16\" class=\"node\">\n",
       "<title>F_T3_T1</title>\n",
       "<g id=\"a_node16\"><a xlink:title=\"F_T3_T1\n",
       "FRML PREFERENCES F_T3_T1 Â = ((1)/(1+EXP((((C_T3-C_T1))/(SIGMA_T3_T1))))) $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"325,-656.87 258,-656.87 258,-620.87 325,-620.87 325,-656.87\"/>\n",
       "<text text-anchor=\"start\" x=\"264.5\" y=\"-634.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">F_T3_T1:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- C_T1&#45;&gt;F_T3_T1 -->\n",
       "<g id=\"edge36\" class=\"edge\">\n",
       "<title>C_T1-&gt;F_T3_T1</title>\n",
       "<g id=\"a_edge36\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M197.41,-377.3C206.53,-381.49 215.97,-387.5 222,-395.87 276.96,-472.12 214.12,-523.84 259.26,-611.01\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"256.19,-612.7 264.11,-619.74 262.32,-609.3 256.19,-612.7\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T1_T2 -->\n",
       "<g id=\"node17\" class=\"node\">\n",
       "<title>F_T1_T2</title>\n",
       "<g id=\"a_node17\"><a xlink:title=\"F_T1_T2\n",
       "FRML PREFERENCES F_T1_T2 Â = ((1)/(1+EXP((((C_T1-C_T2))/(SIGMA_T1_T2))))) $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"325,-170.87 258,-170.87 258,-134.87 325,-134.87 325,-170.87\"/>\n",
       "<text text-anchor=\"start\" x=\"264.5\" y=\"-148.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">F_T1_T2:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- C_T1&#45;&gt;F_T1_T2 -->\n",
       "<g id=\"edge45\" class=\"edge\">\n",
       "<title>C_T1-&gt;F_T1_T2</title>\n",
       "<g id=\"a_edge45\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M197.44,-360.13C206.45,-355.93 215.81,-349.99 222,-341.87 266.71,-283.21 219.57,-242.82 258,-179.87 258.12,-179.67 258.24,-179.48 258.36,-179.28\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"260.93,-181.67 264.47,-171.69 255.48,-177.29 260.93,-181.67\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- C_T1&#45;&gt;F_T1_T3 -->\n",
       "<g id=\"edge8\" class=\"edge\">\n",
       "<title>C_T1-&gt;F_T1_T3</title>\n",
       "<g id=\"a_edge8\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M197.44,-377.6C206.45,-381.8 215.81,-387.74 222,-395.87 266.71,-454.53 219.57,-494.92 258,-557.87 258.12,-558.06 258.24,-558.26 258.36,-558.45\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"255.48,-560.45 264.47,-566.05 260.93,-556.06 255.48,-560.45\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T2_T1 -->\n",
       "<g id=\"node37\" class=\"node\">\n",
       "<title>F_T2_T1</title>\n",
       "<g id=\"a_node37\"><a xlink:title=\"F_T2_T1\n",
       "FRML PREFERENCES F_T2_T1 Â = ((1)/(1+EXP((((C_T2-C_T1))/(SIGMA_T2_T1))))) $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"325,-224.87 258,-224.87 258,-188.87 325,-188.87 325,-224.87\"/>\n",
       "<text text-anchor=\"start\" x=\"264.5\" y=\"-202.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">F_T2_T1:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- C_T1&#45;&gt;F_T2_T1 -->\n",
       "<g id=\"edge68\" class=\"edge\">\n",
       "<title>C_T1-&gt;F_T2_T1</title>\n",
       "<g id=\"a_edge68\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M197.26,-359.65C206.14,-355.42 215.46,-349.59 222,-341.87 254.7,-303.26 229.45,-275.64 258,-233.87 258.13,-233.68 258.26,-233.49 258.39,-233.3\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"260.91,-235.74 264.76,-225.87 255.6,-231.18 260.91,-235.74\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T1_T1&#45;&gt;SHARE_T1 -->\n",
       "<g id=\"edge82\" class=\"edge\">\n",
       "<title>F_T1_T1-&gt;SHARE_T1</title>\n",
       "<g id=\"a_edge82\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M325.35,-371.34C401.17,-376.92 594.27,-390.33 756,-394.87 842.51,-397.29 943.24,-396.54 1002.5,-395.73\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"1002.36,-399.24 1012.31,-395.59 1002.26,-392.24 1002.36,-399.24\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T2(&#45;1) -->\n",
       "<g id=\"node9\" class=\"node\">\n",
       "<title>SHARE_T2(-1)</title>\n",
       "<g id=\"a_node9\"><a xlink:title=\"SHARE_T2\n",
       "FRML SHARES2 SHARE_T2=SHARE_T2(-1)+((SHARE_T2*SHARE_T1*(F_T2_T1/TAU_T1-F_T1_T2/TAU_T2)+SHARE_T2*SHARE_T2*(F_T2_T2/TAU_T2-F_T2_T2/TAU_T2)+SHARE_T2*SHARE_T3*(F_T2_T3/TAU_T3-F_T3_T2/TAU_T2)))$\">\n",
       "<polygon fill=\"springgreen\" stroke=\"black\" points=\"929.5,-220.87 760.5,-220.87 760.5,-184.87 929.5,-184.87 929.5,-220.87\"/>\n",
       "<text text-anchor=\"start\" x=\"767\" y=\"-198.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">SHARE_T2(-1):SHARE_T2</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T2(&#45;1)&#45;&gt;SHARE_T2 -->\n",
       "<g id=\"edge81\" class=\"edge\">\n",
       "<title>SHARE_T2(-1)-&gt;SHARE_T2</title>\n",
       "<g id=\"a_edge81\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M760.06,-210.09C706.3,-211.89 638.3,-212.48 592.54,-211.4\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"592.83,-207.91 582.74,-211.13 592.64,-214.9 592.83,-207.91\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T2 -->\n",
       "<g id=\"node10\" class=\"node\">\n",
       "<title>SIGMA_T2</title>\n",
       "<g id=\"a_node10\"><a xlink:title=\"SIGMA_T2\n",
       "Exogen\">\n",
       "<polygon fill=\"yellow\" stroke=\"black\" points=\"82,-278.87 0,-278.87 0,-242.87 82,-242.87 82,-278.87\"/>\n",
       "<text text-anchor=\"start\" x=\"6\" y=\"-256.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">SIGMA_T2:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T2_T2 -->\n",
       "<g id=\"node12\" class=\"node\">\n",
       "<title>SIGMA_T2_T2</title>\n",
       "<g id=\"a_node12\"><a xlink:title=\"SIGMA_T2_T2\n",
       "FRML SIGMA SIGMA_T2_T2 Â = SQRT(SIGMA_T2**2*SIGMA_T2**2) $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"222,-116.87 118,-116.87 118,-80.87 222,-80.87 222,-116.87\"/>\n",
       "<text text-anchor=\"start\" x=\"124\" y=\"-94.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">SIGMA_T2_T2:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T2&#45;&gt;SIGMA_T2_T2 -->\n",
       "<g id=\"edge77\" class=\"edge\">\n",
       "<title>SIGMA_T2-&gt;SIGMA_T2_T2</title>\n",
       "<g id=\"a_edge77\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M48.42,-242.57C59.06,-214.44 82.75,-160.22 118,-125.87 118.81,-125.08 119.64,-124.31 120.5,-123.56\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"122.34,-126.56 128.15,-117.7 118.08,-121 122.34,-126.56\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T2_T1 -->\n",
       "<g id=\"node18\" class=\"node\">\n",
       "<title>SIGMA_T2_T1</title>\n",
       "<g id=\"a_node18\"><a xlink:title=\"SIGMA_T2_T1\n",
       "FRML SIGMA SIGMA_T2_T1 Â = SQRT(SIGMA_T2**2*SIGMA_T1**2) $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"222,-278.87 118,-278.87 118,-242.87 222,-242.87 222,-278.87\"/>\n",
       "<text text-anchor=\"start\" x=\"124\" y=\"-256.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">SIGMA_T2_T1:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T2&#45;&gt;SIGMA_T2_T1 -->\n",
       "<g id=\"edge21\" class=\"edge\">\n",
       "<title>SIGMA_T2-&gt;SIGMA_T2_T1</title>\n",
       "<g id=\"a_edge21\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M82.18,-260.87C90.15,-260.87 98.69,-260.87 107.19,-260.87\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"107.14,-264.37 117.14,-260.87 107.14,-257.37 107.14,-264.37\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T3_T2 -->\n",
       "<g id=\"node32\" class=\"node\">\n",
       "<title>SIGMA_T3_T2</title>\n",
       "<g id=\"a_node32\"><a xlink:title=\"SIGMA_T3_T2\n",
       "FRML SIGMA SIGMA_T3_T2 Â = SQRT(SIGMA_T3**2*SIGMA_T2**2) $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"222,-494.87 118,-494.87 118,-458.87 222,-458.87 222,-494.87\"/>\n",
       "<text text-anchor=\"start\" x=\"124\" y=\"-472.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">SIGMA_T3_T2:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T2&#45;&gt;SIGMA_T3_T2 -->\n",
       "<g id=\"edge75\" class=\"edge\">\n",
       "<title>SIGMA_T2-&gt;SIGMA_T3_T2</title>\n",
       "<g id=\"a_edge75\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M74.21,-279.13C77.15,-281.77 79.83,-284.68 82,-287.87 123.52,-348.83 73.29,-391.21 118,-449.87 118.3,-450.26 118.61,-450.66 118.93,-451.05\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"116.39,-453.45 125.99,-457.92 121.27,-448.43 116.39,-453.45\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T2_T3 -->\n",
       "<g id=\"node35\" class=\"node\">\n",
       "<title>SIGMA_T2_T3</title>\n",
       "<g id=\"a_node35\"><a xlink:title=\"SIGMA_T2_T3\n",
       "FRML SIGMA SIGMA_T2_T3 Â = SQRT(SIGMA_T2**2*SIGMA_T3**2) $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"222,-440.87 118,-440.87 118,-404.87 222,-404.87 222,-440.87\"/>\n",
       "<text text-anchor=\"start\" x=\"124\" y=\"-418.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">SIGMA_T2_T3:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T2&#45;&gt;SIGMA_T2_T3 -->\n",
       "<g id=\"edge19\" class=\"edge\">\n",
       "<title>SIGMA_T2-&gt;SIGMA_T2_T3</title>\n",
       "<g id=\"a_edge19\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M73.49,-279.03C76.64,-281.71 79.57,-284.66 82,-287.87 112.6,-328.16 85.3,-357.26 118,-395.87 118.51,-396.47 119.04,-397.06 119.58,-397.64\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"117,-400.03 126.8,-404.04 121.64,-394.79 117,-400.03\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T1_T2 -->\n",
       "<g id=\"node36\" class=\"node\">\n",
       "<title>SIGMA_T1_T2</title>\n",
       "<g id=\"a_node36\"><a xlink:title=\"SIGMA_T1_T2\n",
       "FRML SIGMA SIGMA_T1_T2 Â = SQRT(SIGMA_T1**2*SIGMA_T2**2) $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"222,-170.87 118,-170.87 118,-134.87 222,-134.87 222,-170.87\"/>\n",
       "<text text-anchor=\"start\" x=\"124\" y=\"-148.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">SIGMA_T1_T2:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T2&#45;&gt;SIGMA_T1_T2 -->\n",
       "<g id=\"edge48\" class=\"edge\">\n",
       "<title>SIGMA_T2-&gt;SIGMA_T1_T2</title>\n",
       "<g id=\"a_edge48\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M56.24,-242.47C70.51,-224.88 93.78,-198.36 118,-179.87 119.24,-178.92 120.53,-177.98 121.84,-177.06\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"123.67,-180.05 130.17,-171.68 119.87,-174.17 123.67,-180.05\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T3_T2 -->\n",
       "<g id=\"node11\" class=\"node\">\n",
       "<title>F_T3_T2</title>\n",
       "<g id=\"a_node11\"><a xlink:title=\"F_T3_T2\n",
       "FRML PREFERENCES F_T3_T2 Â = ((1)/(1+EXP((((C_T3-C_T2))/(SIGMA_T3_T2))))) $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"325,-548.87 258,-548.87 258,-512.87 325,-512.87 325,-548.87\"/>\n",
       "<text text-anchor=\"start\" x=\"264.5\" y=\"-526.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">F_T3_T2:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T3_T2&#45;&gt;SHARE_T3 -->\n",
       "<g id=\"edge33\" class=\"edge\">\n",
       "<title>F_T3_T2-&gt;SHARE_T3</title>\n",
       "<g id=\"a_edge33\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M325.5,-529.73C397.27,-527.2 572.94,-520.71 720,-512.87 743.97,-511.59 770.54,-509.91 792.91,-508.42\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"793.03,-511.92 802.77,-507.76 792.56,-504.94 793.03,-511.92\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T3_T2&#45;&gt;SHARE_T2 -->\n",
       "<g id=\"edge88\" class=\"edge\">\n",
       "<title>F_T3_T2-&gt;SHARE_T2</title>\n",
       "<g id=\"a_edge88\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M316.22,-512.37C319.29,-509.64 322.3,-506.76 325,-503.87 409.6,-413.34 489.65,-288.61 523.09,-234.15\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"525.98,-236.13 528.21,-225.77 520.01,-232.48 525.98,-236.13\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T2_T2 -->\n",
       "<g id=\"node30\" class=\"node\">\n",
       "<title>F_T2_T2</title>\n",
       "<g id=\"a_node30\"><a xlink:title=\"F_T2_T2\n",
       "FRML PREFERENCES F_T2_T2 Â = ((1)/(1+EXP((((C_T2-C_T2))/(SIGMA_T2_T2))))) $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"325,-116.87 258,-116.87 258,-80.87 325,-80.87 325,-116.87\"/>\n",
       "<text text-anchor=\"start\" x=\"264.5\" y=\"-94.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">F_T2_T2:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T2_T2&#45;&gt;F_T2_T2 -->\n",
       "<g id=\"edge62\" class=\"edge\">\n",
       "<title>SIGMA_T2_T2-&gt;F_T2_T2</title>\n",
       "<g id=\"a_edge62\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M222.37,-98.87C230.64,-98.87 239.12,-98.87 247.17,-98.87\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"247.06,-102.37 257.06,-98.87 247.06,-95.37 247.06,-102.37\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_TOTAL -->\n",
       "<g id=\"node13\" class=\"node\">\n",
       "<title>SHARE_TOTAL</title>\n",
       "<g id=\"a_node13\"><a xlink:title=\"SHARE_TOTAL\n",
       "FRML CHECK_SHARES SHARE_TOTAL Â Â = (SHARE_T1+SHARE_T2+SHARE_T3) $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"1315,-466.87 1204,-466.87 1204,-430.87 1315,-430.87 1315,-466.87\"/>\n",
       "<text text-anchor=\"start\" x=\"1210.5\" y=\"-444.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">SHARE_TOTAL:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- USEFULDEMAND_T2 -->\n",
       "<g id=\"node14\" class=\"node\">\n",
       "<title>USEFULDEMAND_T2</title>\n",
       "<g id=\"a_node14\"><a xlink:title=\"USEFULDEMAND_T2\n",
       "FRML UD USEFULDEMAND_T2 Â = SHARE_T2*USEFULDEMAND_TOTAL $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"1129,-623.87 980,-623.87 980,-587.87 1129,-587.87 1129,-623.87\"/>\n",
       "<text text-anchor=\"start\" x=\"986.5\" y=\"-601.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">USEFULDEMAND_T2:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- TAU_T2 -->\n",
       "<g id=\"node15\" class=\"node\">\n",
       "<title>TAU_T2</title>\n",
       "<g id=\"a_node15\"><a xlink:title=\"TAU_T2\n",
       "Exogen\">\n",
       "<polygon fill=\"yellow\" stroke=\"black\" points=\"324,-332.87 259,-332.87 259,-296.87 324,-296.87 324,-332.87\"/>\n",
       "<text text-anchor=\"start\" x=\"265.5\" y=\"-310.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">TAU_T2:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- TAU_T2&#45;&gt;SHARE_T3 -->\n",
       "<g id=\"edge66\" class=\"edge\">\n",
       "<title>TAU_T2-&gt;SHARE_T3</title>\n",
       "<g id=\"a_edge66\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M324.49,-319.49C397.19,-330.77 579.4,-363.36 720,-424.87 753.45,-439.5 788.08,-462.63 812.21,-480.26\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"809.88,-482.89 820,-486.03 814.05,-477.27 809.88,-482.89\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- TAU_T2&#45;&gt;SHARE_T2 -->\n",
       "<g id=\"edge47\" class=\"edge\">\n",
       "<title>TAU_T2-&gt;SHARE_T2</title>\n",
       "<g id=\"a_edge47\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M324.29,-300.97C366.1,-282.69 440.04,-250.36 489.41,-228.77\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"490.79,-231.99 498.55,-224.77 487.98,-225.57 490.79,-231.99\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- TAU_T2&#45;&gt;SHARE_T1 -->\n",
       "<g id=\"edge51\" class=\"edge\">\n",
       "<title>TAU_T2-&gt;SHARE_T1</title>\n",
       "<g id=\"a_edge51\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M324.28,-313.37C395.45,-310.46 572.9,-305.77 720,-322.87 821.58,-334.67 937.82,-363.3 1002.75,-380.69\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"1001.81,-384.06 1012.38,-383.29 1003.64,-377.3 1001.81,-384.06\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T3_T1&#45;&gt;SHARE_T3 -->\n",
       "<g id=\"edge56\" class=\"edge\">\n",
       "<title>F_T3_T1-&gt;SHARE_T3</title>\n",
       "<g id=\"a_edge56\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M325.26,-637.17C398.02,-632.65 577.88,-617.19 720,-569.87 750.54,-559.7 782.66,-542.66 806.56,-528.57\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"808.19,-531.68 814.97,-523.53 804.59,-525.67 808.19,-531.68\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T3_T1&#45;&gt;SHARE_T1 -->\n",
       "<g id=\"edge28\" class=\"edge\">\n",
       "<title>F_T3_T1-&gt;SHARE_T1</title>\n",
       "<g id=\"a_edge28\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M325.46,-648.56C428.65,-676.73 749.63,-747.46 934,-597.87 977.24,-562.78 941.38,-525.63 970,-477.87 983.39,-455.52 1004.15,-434.85 1021.62,-419.72\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"1023.41,-422.79 1028.8,-413.67 1018.9,-417.44 1023.41,-422.79\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T1_T2&#45;&gt;SHARE_T2 -->\n",
       "<g id=\"edge57\" class=\"edge\">\n",
       "<title>F_T1_T2-&gt;SHARE_T2</title>\n",
       "<g id=\"a_edge57\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M325.3,-160.04C367.11,-169.18 439.84,-185.08 488.81,-195.78\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"487.93,-199.17 498.44,-197.89 489.42,-192.34 487.93,-199.17\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T1_T2&#45;&gt;SHARE_T1 -->\n",
       "<g id=\"edge63\" class=\"edge\">\n",
       "<title>F_T1_T2-&gt;SHARE_T1</title>\n",
       "<g id=\"a_edge63\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M316.01,-134.5C331.77,-122.63 351.36,-108.86 361,-105.87 604.24,-30.44 722.78,34.41 934,-107.87 1022.31,-167.36 1045.48,-305.6 1051.46,-365.89\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"1047.97,-366.13 1052.35,-375.78 1054.94,-365.5 1047.97,-366.13\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T2_T1&#45;&gt;F_T2_T1 -->\n",
       "<g id=\"edge80\" class=\"edge\">\n",
       "<title>SIGMA_T2_T1-&gt;F_T2_T1</title>\n",
       "<g id=\"a_edge80\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M211.79,-242.43C223.52,-237.13 236.33,-231.34 248.15,-226\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"249.44,-229.26 257.11,-221.96 246.55,-222.88 249.44,-229.26\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T3&#45;&gt;SHARE_TOTAL -->\n",
       "<g id=\"edge14\" class=\"edge\">\n",
       "<title>SHARE_T3-&gt;SHARE_TOTAL</title>\n",
       "<g id=\"a_edge14\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M886.27,-494.88C910.42,-489.19 941.82,-482.34 970,-477.87 1046.17,-465.79 1134.51,-457.78 1193.16,-453.29\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"1193.29,-456.79 1203,-452.56 1192.77,-449.81 1193.29,-456.79\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T3&#45;&gt;SHARE_T3 -->\n",
       "<g id=\"edge9\" class=\"edge\">\n",
       "<title>SHARE_T3-&gt;SHARE_T3</title>\n",
       "<g id=\"a_edge9\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M807.1,-523.02C801.27,-532.41 813.9,-540.87 845,-540.87 863.46,-540.87 875.42,-537.88 880.86,-533.5\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"884.28,-534.25 882.76,-523.76 877.41,-532.91 884.28,-534.25\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- USEFULDEMAND_T3 -->\n",
       "<g id=\"node20\" class=\"node\">\n",
       "<title>USEFULDEMAND_T3</title>\n",
       "<g id=\"a_node20\"><a xlink:title=\"USEFULDEMAND_T3\n",
       "FRML UD USEFULDEMAND_T3 Â = SHARE_T3*USEFULDEMAND_TOTAL $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"1129,-701.87 980,-701.87 980,-665.87 1129,-665.87 1129,-701.87\"/>\n",
       "<text text-anchor=\"start\" x=\"986.5\" y=\"-679.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">USEFULDEMAND_T3:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T3&#45;&gt;USEFULDEMAND_T3 -->\n",
       "<g id=\"edge52\" class=\"edge\">\n",
       "<title>SHARE_T3-&gt;USEFULDEMAND_T3</title>\n",
       "<g id=\"a_edge52\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M861.17,-523.25C883.36,-549.47 926.76,-598.27 970,-632.87 982.39,-642.78 996.86,-652.25 1010.24,-660.28\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"1008.25,-663.17 1018.64,-665.22 1011.79,-657.13 1008.25,-663.17\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T3(&#45;1) -->\n",
       "<g id=\"node25\" class=\"node\">\n",
       "<title>SHARE_T3(-1)</title>\n",
       "<g id=\"a_node25\"><a xlink:title=\"SHARE_T3\n",
       "FRML SHARES2 SHARE_T3=SHARE_T3(-1)+((SHARE_T3*SHARE_T1*(F_T3_T1/TAU_T1-F_T1_T3/TAU_T3)+SHARE_T3*SHARE_T2*(F_T3_T2/TAU_T2-F_T2_T3/TAU_T3)+SHARE_T3*SHARE_T3*(F_T3_T3/TAU_T3-F_T3_T3/TAU_T3)))$\">\n",
       "<polygon fill=\"springgreen\" stroke=\"black\" points=\"1139,-522.87 970,-522.87 970,-486.87 1139,-486.87 1139,-522.87\"/>\n",
       "<text text-anchor=\"start\" x=\"976.5\" y=\"-500.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">SHARE_T3(-1):SHARE_T3</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T3&#45;&gt;SHARE_T3(&#45;1) -->\n",
       "<g id=\"edge18\" class=\"edge\">\n",
       "<title>SHARE_T3-&gt;SHARE_T3(-1)</title>\n",
       "<g id=\"a_edge18\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M886.01,-499.41C906.92,-498.43 933.46,-498 959.23,-498.14\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"959.03,-501.64 969.06,-498.22 959.08,-494.64 959.03,-501.64\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T3&#45;&gt;SHARE_T2 -->\n",
       "<g id=\"edge69\" class=\"edge\">\n",
       "<title>SHARE_T3-&gt;SHARE_T2</title>\n",
       "<g id=\"a_edge69\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M827.21,-486.51C808.26,-460.24 777.31,-411.01 756,-365.87 735.84,-323.15 754.59,-298.04 720,-265.87 685.35,-233.64 631.63,-221.94 592.17,-216.11\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"592.84,-212.67 582.45,-214.75 591.87,-219.6 592.84,-212.67\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T3&#45;&gt;SHARE_T1 -->\n",
       "<g id=\"edge73\" class=\"edge\">\n",
       "<title>SHARE_T3-&gt;SHARE_T1</title>\n",
       "<g id=\"a_edge73\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M881.79,-486.48C898.22,-480.29 917.64,-472.91 934,-463.87 951.74,-454.06 953.27,-447.32 970,-435.87 980.89,-428.41 992.91,-420.85 1004.36,-414.2\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"1005.75,-417.43 1012.72,-409.45 1002.3,-411.34 1005.75,-417.43\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T3_T1 -->\n",
       "<g id=\"node21\" class=\"node\">\n",
       "<title>SIGMA_T3_T1</title>\n",
       "<g id=\"a_node21\"><a xlink:title=\"SIGMA_T3_T1\n",
       "FRML SIGMA SIGMA_T3_T1 Â = SQRT(SIGMA_T3**2*SIGMA_T1**2) $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"222,-656.87 118,-656.87 118,-620.87 222,-620.87 222,-656.87\"/>\n",
       "<text text-anchor=\"start\" x=\"124\" y=\"-634.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">SIGMA_T3_T1:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T3_T1&#45;&gt;F_T3_T1 -->\n",
       "<g id=\"edge54\" class=\"edge\">\n",
       "<title>SIGMA_T3_T1-&gt;F_T3_T1</title>\n",
       "<g id=\"a_edge54\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M222.37,-638.87C230.64,-638.87 239.12,-638.87 247.17,-638.87\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"247.06,-642.37 257.06,-638.87 247.06,-635.37 247.06,-642.37\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T1 -->\n",
       "<g id=\"node22\" class=\"node\">\n",
       "<title>SIGMA_T1</title>\n",
       "<g id=\"a_node22\"><a xlink:title=\"SIGMA_T1\n",
       "Exogen\">\n",
       "<polygon fill=\"yellow\" stroke=\"black\" points=\"82,-332.87 0,-332.87 0,-296.87 82,-296.87 82,-332.87\"/>\n",
       "<text text-anchor=\"start\" x=\"6\" y=\"-310.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">SIGMA_T1:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T1&#45;&gt;SIGMA_T1_T1 -->\n",
       "<g id=\"edge49\" class=\"edge\">\n",
       "<title>SIGMA_T1-&gt;SIGMA_T1_T1</title>\n",
       "<g id=\"a_edge49\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M82.18,-314.87C90.15,-314.87 98.69,-314.87 107.19,-314.87\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"107.14,-318.37 117.14,-314.87 107.14,-311.37 107.14,-318.37\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T1&#45;&gt;SIGMA_T1_T3 -->\n",
       "<g id=\"edge61\" class=\"edge\">\n",
       "<title>SIGMA_T1-&gt;SIGMA_T1_T3</title>\n",
       "<g id=\"a_edge61\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M45.03,-333.22C51.91,-369.78 71.85,-452.62 118,-503.87 118.54,-504.47 119.1,-505.06 119.67,-505.63\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"117.35,-508.26 127.24,-512.05 121.88,-502.92 117.35,-508.26\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T1&#45;&gt;SIGMA_T2_T1 -->\n",
       "<g id=\"edge89\" class=\"edge\">\n",
       "<title>SIGMA_T1-&gt;SIGMA_T2_T1</title>\n",
       "<g id=\"a_edge89\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M82.18,-297.78C92.86,-293.24 104.56,-288.26 115.82,-283.48\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"117.03,-286.77 124.86,-279.63 114.29,-280.33 117.03,-286.77\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T1&#45;&gt;SIGMA_T3_T1 -->\n",
       "<g id=\"edge17\" class=\"edge\">\n",
       "<title>SIGMA_T1-&gt;SIGMA_T3_T1</title>\n",
       "<g id=\"a_edge17\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M45.77,-333.12C58.53,-394.28 100.26,-589.34 118,-611.87 118.49,-612.49 118.99,-613.09 119.52,-613.69\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"116.86,-615.99 126.57,-620.22 121.61,-610.86 116.86,-615.99\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T1&#45;&gt;SIGMA_T1_T2 -->\n",
       "<g id=\"edge50\" class=\"edge\">\n",
       "<title>SIGMA_T1-&gt;SIGMA_T1_T2</title>\n",
       "<g id=\"a_edge50\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M73.49,-296.7C76.64,-294.02 79.57,-291.07 82,-287.87 112.6,-247.57 85.3,-218.47 118,-179.87 118.51,-179.26 119.04,-178.67 119.58,-178.09\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"121.64,-180.95 126.8,-171.7 117,-175.71 121.64,-180.95\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- C_T2 -->\n",
       "<g id=\"node23\" class=\"node\">\n",
       "<title>C_T2</title>\n",
       "<g id=\"a_node23\"><a xlink:title=\"C_T2\n",
       "Exogen\">\n",
       "<polygon fill=\"yellow\" stroke=\"black\" points=\"197,-224.87 143,-224.87 143,-188.87 197,-188.87 197,-224.87\"/>\n",
       "<text text-anchor=\"start\" x=\"153\" y=\"-202.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">C_T2:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- C_T2&#45;&gt;F_T2_T3 -->\n",
       "<g id=\"edge24\" class=\"edge\">\n",
       "<title>C_T2-&gt;F_T2_T3</title>\n",
       "<g id=\"a_edge24\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M197.44,-215.6C206.45,-219.8 215.81,-225.74 222,-233.87 266.71,-292.53 219.57,-332.92 258,-395.87 258.12,-396.06 258.24,-396.26 258.36,-396.45\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"255.48,-398.45 264.47,-404.05 260.93,-394.06 255.48,-398.45\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- C_T2&#45;&gt;F_T3_T2 -->\n",
       "<g id=\"edge78\" class=\"edge\">\n",
       "<title>C_T2-&gt;F_T3_T2</title>\n",
       "<g id=\"a_edge78\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M197.29,-215.08C206.51,-219.26 216.05,-225.32 222,-233.87 289.28,-330.5 204.32,-394.36 259.39,-503.18\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"256.2,-504.64 264.02,-511.79 262.37,-501.33 256.2,-504.64\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- C_T2&#45;&gt;F_T1_T2 -->\n",
       "<g id=\"edge43\" class=\"edge\">\n",
       "<title>C_T2-&gt;F_T1_T2</title>\n",
       "<g id=\"a_edge43\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M197.22,-195.02C212.16,-188.27 231.22,-179.65 248.22,-171.97\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"249.58,-175.2 257.25,-167.89 246.69,-168.82 249.58,-175.2\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- C_T2&#45;&gt;F_T2_T2 -->\n",
       "<g id=\"edge55\" class=\"edge\">\n",
       "<title>C_T2-&gt;F_T2_T2</title>\n",
       "<g id=\"a_edge55\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M197.24,-196.1C205.72,-191.84 214.79,-186.38 222,-179.87 243.4,-160.53 238.7,-147.31 258,-125.87 258.33,-125.5 258.67,-125.13 259.01,-124.76\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"261.43,-127.29 266.14,-117.8 256.54,-122.28 261.43,-127.29\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- C_T2&#45;&gt;F_T2_T1 -->\n",
       "<g id=\"edge58\" class=\"edge\">\n",
       "<title>C_T2-&gt;F_T2_T1</title>\n",
       "<g id=\"a_edge58\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M197.22,-206.87C211.88,-206.87 230.51,-206.87 247.26,-206.87\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"247.18,-210.37 257.18,-206.87 247.18,-203.37 247.18,-210.37\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T3_T3 -->\n",
       "<g id=\"node24\" class=\"node\">\n",
       "<title>SIGMA_T3_T3</title>\n",
       "<g id=\"a_node24\"><a xlink:title=\"SIGMA_T3_T3\n",
       "FRML SIGMA SIGMA_T3_T3 Â = SQRT(SIGMA_T3**2*SIGMA_T3**2) $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"222,-710.87 118,-710.87 118,-674.87 222,-674.87 222,-710.87\"/>\n",
       "<text text-anchor=\"start\" x=\"124\" y=\"-688.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">SIGMA_T3_T3:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T3_T3 -->\n",
       "<g id=\"node29\" class=\"node\">\n",
       "<title>F_T3_T3</title>\n",
       "<g id=\"a_node29\"><a xlink:title=\"F_T3_T3\n",
       "FRML PREFERENCES F_T3_T3 Â = ((1)/(1+EXP((((C_T3-C_T3))/(SIGMA_T3_T3))))) $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"325,-710.87 258,-710.87 258,-674.87 325,-674.87 325,-710.87\"/>\n",
       "<text text-anchor=\"start\" x=\"264.5\" y=\"-688.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">F_T3_T3:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T3_T3&#45;&gt;F_T3_T3 -->\n",
       "<g id=\"edge15\" class=\"edge\">\n",
       "<title>SIGMA_T3_T3-&gt;F_T3_T3</title>\n",
       "<g id=\"a_edge15\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M222.37,-692.87C230.64,-692.87 239.12,-692.87 247.17,-692.87\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"247.06,-696.37 257.06,-692.87 247.06,-689.37 247.06,-696.37\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T3(&#45;1)&#45;&gt;SHARE_T3 -->\n",
       "<g id=\"edge34\" class=\"edge\">\n",
       "<title>SHARE_T3(-1)-&gt;SHARE_T3</title>\n",
       "<g id=\"a_edge34\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M969.81,-511.5C945.07,-511.79 918.74,-511.54 896.75,-510.76\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"896.9,-507.27 886.76,-510.36 896.61,-514.26 896.9,-507.27\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T1_T3&#45;&gt;SHARE_T3 -->\n",
       "<g id=\"edge25\" class=\"edge\">\n",
       "<title>F_T1_T3-&gt;SHARE_T3</title>\n",
       "<g id=\"a_edge25\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M325.4,-582.2C397.33,-576.08 573.88,-559.59 720,-533.87 744.34,-529.58 771.07,-523.51 793.46,-518.03\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"794.15,-521.46 803.01,-515.66 792.46,-514.67 794.15,-521.46\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T1_T3&#45;&gt;SHARE_T1 -->\n",
       "<g id=\"edge84\" class=\"edge\">\n",
       "<title>F_T1_T3-&gt;SHARE_T1</title>\n",
       "<g id=\"a_edge84\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M325.19,-593.86C426.25,-619.63 738.63,-683.57 934,-549.87 963.52,-529.66 949.04,-506.86 970,-477.87 985.34,-456.66 1006.22,-435.9 1023.27,-420.45\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"1025.58,-423.08 1030.72,-413.81 1020.92,-417.85 1025.58,-423.08\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- TAU_T3 -->\n",
       "<g id=\"node27\" class=\"node\">\n",
       "<title>TAU_T3</title>\n",
       "<g id=\"a_node27\"><a xlink:title=\"TAU_T3\n",
       "Exogen\">\n",
       "<polygon fill=\"yellow\" stroke=\"black\" points=\"324,-278.87 259,-278.87 259,-242.87 324,-242.87 324,-278.87\"/>\n",
       "<text text-anchor=\"start\" x=\"265.5\" y=\"-256.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">TAU_T3:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- TAU_T3&#45;&gt;SHARE_T3 -->\n",
       "<g id=\"edge53\" class=\"edge\">\n",
       "<title>TAU_T3-&gt;SHARE_T3</title>\n",
       "<g id=\"a_edge53\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M324.4,-257.15C399.65,-250.03 591.57,-241.62 720,-321.87 750.69,-341.04 803.45,-431.28 829.12,-477.47\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"825.9,-478.89 833.8,-485.95 832.03,-475.51 825.9,-478.89\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- TAU_T3&#45;&gt;SHARE_T2 -->\n",
       "<g id=\"edge20\" class=\"edge\">\n",
       "<title>TAU_T3-&gt;SHARE_T2</title>\n",
       "<g id=\"a_edge20\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M324.29,-253.92C365.92,-244.81 439.42,-228.75 488.79,-217.95\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"489.48,-221.38 498.5,-215.83 487.99,-214.55 489.48,-221.38\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- TAU_T3&#45;&gt;SHARE_T1 -->\n",
       "<g id=\"edge27\" class=\"edge\">\n",
       "<title>TAU_T3-&gt;SHARE_T1</title>\n",
       "<g id=\"a_edge27\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M316.32,-242.46C319.37,-239.71 322.35,-236.81 325,-233.87 344.3,-212.43 335.64,-193.61 361,-179.87 416.98,-149.54 879.25,-143.37 934,-175.87 1004.47,-217.69 1036.05,-317.31 1047.73,-366.45\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"1044.26,-366.97 1049.88,-375.95 1051.09,-365.42 1044.26,-366.97\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T2&#45;&gt;SHARE_T2(&#45;1) -->\n",
       "<g id=\"edge46\" class=\"edge\">\n",
       "<title>SHARE_T2-&gt;SHARE_T2(-1)</title>\n",
       "<g id=\"a_edge46\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M581.98,-201.56C624.56,-199.06 693.06,-197.64 749.34,-197.81\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"749.28,-201.31 759.3,-197.86 749.32,-194.31 749.28,-201.31\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T2&#45;&gt;SHARE_TOTAL -->\n",
       "<g id=\"edge87\" class=\"edge\">\n",
       "<title>SHARE_T2-&gt;SHARE_TOTAL</title>\n",
       "<g id=\"a_edge87\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M581.83,-210.91C668.26,-219.85 868.81,-242.16 934,-262.87 1031.56,-293.85 1062.59,-299.75 1139,-367.87 1160.53,-387.06 1152,-404.46 1175,-421.87 1180.71,-426.19 1187.15,-429.84 1193.84,-432.91\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"1192.51,-436.14 1203.08,-436.72 1195.17,-429.67 1192.51,-436.14\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T2&#45;&gt;USEFULDEMAND_T2 -->\n",
       "<g id=\"edge38\" class=\"edge\">\n",
       "<title>SHARE_T2-&gt;USEFULDEMAND_T2</title>\n",
       "<g id=\"a_edge38\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M581.85,-206.6C621.03,-208.37 680.26,-216.61 720,-247.87 748.12,-269.98 734.23,-291.48 756,-319.87 820.37,-403.8 864.53,-398.09 934,-477.87 952.94,-499.62 951.05,-510.12 970,-531.87 985.5,-549.65 1005.14,-567.26 1021.49,-580.84\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"1019.15,-583.45 1029.11,-587.07 1023.58,-578.03 1019.15,-583.45\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T2&#45;&gt;SHARE_T3 -->\n",
       "<g id=\"edge83\" class=\"edge\">\n",
       "<title>SHARE_T2-&gt;SHARE_T3</title>\n",
       "<g id=\"a_edge83\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M581.7,-201.08C621.62,-201.97 682.18,-212.69 720,-247.87 754.59,-280.04 735.84,-305.15 756,-347.87 778.32,-395.15 811.22,-446.91 829.82,-477.83\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"826.61,-479.26 834.72,-486.07 832.62,-475.69 826.61,-479.26\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T2&#45;&gt;SHARE_T2 -->\n",
       "<g id=\"edge39\" class=\"edge\">\n",
       "<title>SHARE_T2-&gt;SHARE_T2</title>\n",
       "<g id=\"a_edge39\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M499.33,-221.28C484.95,-232.03 498.68,-242.87 540.5,-242.87 569.91,-242.87 585.42,-237.51 587.05,-230.59\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"590.08,-228.85 582.05,-221.94 584.02,-232.35 590.08,-228.85\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T2&#45;&gt;SHARE_T1 -->\n",
       "<g id=\"edge41\" class=\"edge\">\n",
       "<title>SHARE_T2-&gt;SHARE_T1</title>\n",
       "<g id=\"a_edge41\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M581.85,-210.86C654.22,-224.61 810.07,-265.33 934,-319.87 966.56,-334.19 1002.01,-354.41 1025.78,-370.49\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"1023.77,-373.36 1033.97,-376.22 1027.78,-367.62 1023.77,-373.36\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T3_T3&#45;&gt;SHARE_T3 -->\n",
       "<g id=\"edge30\" class=\"edge\">\n",
       "<title>F_T3_T3-&gt;SHARE_T3</title>\n",
       "<g id=\"a_edge30\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M325.46,-692.92C399.78,-691.81 584.46,-682.04 720,-615.87 761.7,-595.51 799.89,-557 822.55,-531.13\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"825,-533.66 828.86,-523.79 819.69,-529.1 825,-533.66\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T2_T2&#45;&gt;SHARE_T2 -->\n",
       "<g id=\"edge76\" class=\"edge\">\n",
       "<title>F_T2_T2-&gt;SHARE_T2</title>\n",
       "<g id=\"a_edge76\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M325.3,-113.21C367.29,-131.57 440.45,-163.56 489.42,-184.97\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"487.92,-188.13 498.49,-188.93 490.73,-181.72 487.92,-188.13\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- C_T3 -->\n",
       "<g id=\"node31\" class=\"node\">\n",
       "<title>C_T3</title>\n",
       "<g id=\"a_node31\"><a xlink:title=\"C_T3\n",
       "Exogen\">\n",
       "<polygon fill=\"yellow\" stroke=\"black\" points=\"197,-602.87 143,-602.87 143,-566.87 197,-566.87 197,-602.87\"/>\n",
       "<text text-anchor=\"start\" x=\"153\" y=\"-580.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">C_T3:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- C_T3&#45;&gt;F_T2_T3 -->\n",
       "<g id=\"edge42\" class=\"edge\">\n",
       "<title>C_T3-&gt;F_T2_T3</title>\n",
       "<g id=\"a_edge42\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M197.26,-575.65C206.14,-571.42 215.46,-565.59 222,-557.87 254.7,-519.26 229.45,-491.64 258,-449.87 258.13,-449.68 258.26,-449.49 258.39,-449.3\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"260.91,-451.74 264.76,-441.87 255.6,-447.18 260.91,-451.74\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- C_T3&#45;&gt;F_T3_T2 -->\n",
       "<g id=\"edge5\" class=\"edge\">\n",
       "<title>C_T3-&gt;F_T3_T2</title>\n",
       "<g id=\"a_edge5\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M197.22,-573.02C212.16,-566.27 231.22,-557.65 248.22,-549.97\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"249.58,-553.2 257.25,-545.89 246.69,-546.82 249.58,-553.2\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- C_T3&#45;&gt;F_T3_T1 -->\n",
       "<g id=\"edge86\" class=\"edge\">\n",
       "<title>C_T3-&gt;F_T3_T1</title>\n",
       "<g id=\"a_edge86\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M197.22,-596.72C212.16,-603.46 231.22,-612.08 248.22,-619.76\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"246.69,-622.91 257.25,-623.84 249.58,-616.53 246.69,-622.91\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- C_T3&#45;&gt;F_T1_T3 -->\n",
       "<g id=\"edge31\" class=\"edge\">\n",
       "<title>C_T3-&gt;F_T1_T3</title>\n",
       "<g id=\"a_edge31\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M197.22,-584.87C211.88,-584.87 230.51,-584.87 247.26,-584.87\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"247.18,-588.37 257.18,-584.87 247.18,-581.37 247.18,-588.37\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- C_T3&#45;&gt;F_T3_T3 -->\n",
       "<g id=\"edge32\" class=\"edge\">\n",
       "<title>C_T3-&gt;F_T3_T3</title>\n",
       "<g id=\"a_edge32\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M197.24,-595.63C205.72,-599.9 214.79,-605.35 222,-611.87 243.4,-631.21 238.7,-644.43 258,-665.87 258.33,-666.23 258.67,-666.6 259.01,-666.97\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"256.54,-669.45 266.14,-673.93 261.43,-664.44 256.54,-669.45\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T3_T2&#45;&gt;F_T3_T2 -->\n",
       "<g id=\"edge6\" class=\"edge\">\n",
       "<title>SIGMA_T3_T2-&gt;F_T3_T2</title>\n",
       "<g id=\"a_edge6\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M211.79,-495.3C223.52,-500.6 236.33,-506.39 248.15,-511.73\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"246.55,-514.85 257.11,-515.78 249.44,-508.47 246.55,-514.85\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T1&#45;&gt;SHARE_T1(&#45;1) -->\n",
       "<g id=\"edge22\" class=\"edge\">\n",
       "<title>SHARE_T1-&gt;SHARE_T1(-1)</title>\n",
       "<g id=\"a_edge22\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M1095.61,-389.36C1115.33,-388.44 1140.02,-388.03 1164.16,-388.13\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"1164.04,-391.63 1174.07,-388.2 1164.09,-384.63 1164.04,-391.63\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T1&#45;&gt;SHARE_TOTAL -->\n",
       "<g id=\"edge44\" class=\"edge\">\n",
       "<title>SHARE_T1-&gt;SHARE_TOTAL</title>\n",
       "<g id=\"a_edge44\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M1095.61,-405.54C1123.55,-412.97 1161.44,-423.05 1193.64,-431.61\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"1192.58,-434.95 1203.14,-434.14 1194.38,-428.19 1192.58,-434.95\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T1&#45;&gt;SHARE_T3 -->\n",
       "<g id=\"edge37\" class=\"edge\">\n",
       "<title>SHARE_T1-&gt;SHARE_T3</title>\n",
       "<g id=\"a_edge37\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M1033.16,-413.31C1015.99,-424.84 990.91,-439.55 970,-453.87 953.27,-465.32 951.74,-472.06 934,-481.87 922.21,-488.38 908.84,-494.03 896.14,-498.39\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"895.31,-494.98 886.86,-501.37 897.45,-501.64 895.31,-494.98\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T1&#45;&gt;SHARE_T2 -->\n",
       "<g id=\"edge29\" class=\"edge\">\n",
       "<title>SHARE_T1-&gt;SHARE_T2</title>\n",
       "<g id=\"a_edge29\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M1013.22,-378.18C990.48,-365.94 961.22,-349.85 934,-337.87 815.64,-285.78 668.16,-246.3 592.1,-224.49\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"593.16,-221.15 582.58,-221.74 591.22,-227.87 593.16,-221.15\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T1&#45;&gt;SHARE_T1 -->\n",
       "<g id=\"edge35\" class=\"edge\">\n",
       "<title>SHARE_T1-&gt;SHARE_T1</title>\n",
       "<g id=\"a_edge35\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M1017.41,-413.02C1011.71,-422.41 1024.07,-430.87 1054.5,-430.87 1072.57,-430.87 1084.27,-427.88 1089.59,-423.5\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"1093.02,-424.24 1091.44,-413.76 1086.14,-422.93 1093.02,-424.24\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- USEFULDEMAND_T1 -->\n",
       "<g id=\"node39\" class=\"node\">\n",
       "<title>USEFULDEMAND_T1</title>\n",
       "<g id=\"a_node39\"><a xlink:title=\"USEFULDEMAND_T1\n",
       "FRML UD USEFULDEMAND_T1 Â = SHARE_T1*USEFULDEMAND_TOTAL $\">\n",
       "<polygon fill=\"#63b8ff\" stroke=\"black\" points=\"1334,-639.87 1185,-639.87 1185,-603.87 1334,-603.87 1334,-639.87\"/>\n",
       "<text text-anchor=\"start\" x=\"1191.5\" y=\"-617.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">USEFULDEMAND_T1:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SHARE_T1&#45;&gt;USEFULDEMAND_T1 -->\n",
       "<g id=\"edge70\" class=\"edge\">\n",
       "<title>SHARE_T1-&gt;USEFULDEMAND_T1</title>\n",
       "<g id=\"a_edge70\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M1074.93,-413.15C1092.2,-429.65 1117.9,-454.78 1139,-477.87 1175.31,-517.59 1214.66,-566.2 1237.92,-595.56\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"1234.91,-597.39 1243.85,-603.07 1240.4,-593.05 1234.91,-597.39\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T3 -->\n",
       "<g id=\"node34\" class=\"node\">\n",
       "<title>SIGMA_T3</title>\n",
       "<g id=\"a_node34\"><a xlink:title=\"SIGMA_T3\n",
       "Exogen\">\n",
       "<polygon fill=\"yellow\" stroke=\"black\" points=\"82,-548.87 0,-548.87 0,-512.87 82,-512.87 82,-548.87\"/>\n",
       "<text text-anchor=\"start\" x=\"6\" y=\"-526.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">SIGMA_T3:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T3&#45;&gt;SIGMA_T1_T3 -->\n",
       "<g id=\"edge11\" class=\"edge\">\n",
       "<title>SIGMA_T3-&gt;SIGMA_T1_T3</title>\n",
       "<g id=\"a_edge11\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M82.18,-530.87C90.15,-530.87 98.69,-530.87 107.19,-530.87\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"107.14,-534.37 117.14,-530.87 107.14,-527.37 107.14,-534.37\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T3&#45;&gt;SIGMA_T3_T1 -->\n",
       "<g id=\"edge65\" class=\"edge\">\n",
       "<title>SIGMA_T3-&gt;SIGMA_T3_T1</title>\n",
       "<g id=\"a_edge65\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M56.24,-549.26C70.51,-566.86 93.78,-593.38 118,-611.87 119.24,-612.82 120.53,-613.75 121.84,-614.67\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"119.87,-617.57 130.17,-620.05 123.67,-611.69 119.87,-617.57\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T3&#45;&gt;SIGMA_T3_T3 -->\n",
       "<g id=\"edge4\" class=\"edge\">\n",
       "<title>SIGMA_T3-&gt;SIGMA_T3_T3</title>\n",
       "<g id=\"a_edge4\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M48.42,-549.16C59.06,-577.29 82.75,-631.52 118,-665.87 118.81,-666.65 119.64,-667.42 120.5,-668.18\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"118.08,-670.73 128.15,-674.03 122.34,-665.17 118.08,-670.73\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T3&#45;&gt;SIGMA_T3_T2 -->\n",
       "<g id=\"edge90\" class=\"edge\">\n",
       "<title>SIGMA_T3-&gt;SIGMA_T3_T2</title>\n",
       "<g id=\"a_edge90\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M82.18,-513.78C92.86,-509.24 104.56,-504.26 115.82,-499.48\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"117.03,-502.77 124.86,-495.63 114.29,-496.33 117.03,-502.77\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T3&#45;&gt;SIGMA_T2_T3 -->\n",
       "<g id=\"edge67\" class=\"edge\">\n",
       "<title>SIGMA_T3-&gt;SIGMA_T2_T3</title>\n",
       "<g id=\"a_edge67\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M56.24,-512.47C70.51,-494.88 93.78,-468.36 118,-449.87 119.24,-448.92 120.53,-447.98 121.84,-447.06\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"123.67,-450.05 130.17,-441.68 119.87,-444.17 123.67,-450.05\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T2_T3&#45;&gt;F_T2_T3 -->\n",
       "<g id=\"edge85\" class=\"edge\">\n",
       "<title>SIGMA_T2_T3-&gt;F_T2_T3</title>\n",
       "<g id=\"a_edge85\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M222.37,-422.87C230.64,-422.87 239.12,-422.87 247.17,-422.87\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"247.06,-426.37 257.06,-422.87 247.06,-419.37 247.06,-426.37\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- SIGMA_T1_T2&#45;&gt;F_T1_T2 -->\n",
       "<g id=\"edge40\" class=\"edge\">\n",
       "<title>SIGMA_T1_T2-&gt;F_T1_T2</title>\n",
       "<g id=\"a_edge40\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M222.37,-152.87C230.64,-152.87 239.12,-152.87 247.17,-152.87\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"247.06,-156.37 257.06,-152.87 247.06,-149.37 247.06,-156.37\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T2_T1&#45;&gt;SHARE_T2 -->\n",
       "<g id=\"edge12\" class=\"edge\">\n",
       "<title>F_T2_T1-&gt;SHARE_T2</title>\n",
       "<g id=\"a_edge12\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M325.3,-206.87C367.02,-206.87 439.53,-206.87 488.5,-206.87\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"488.42,-210.37 498.42,-206.87 488.42,-203.37 488.42,-210.37\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- F_T2_T1&#45;&gt;SHARE_T1 -->\n",
       "<g id=\"edge16\" class=\"edge\">\n",
       "<title>F_T2_T1-&gt;SHARE_T1</title>\n",
       "<g id=\"a_edge16\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M314.67,-188.45C334.14,-172.32 359.58,-151.37 361,-150.87 480.93,-108.08 826.06,-84.31 934,-151.87 1010.64,-199.83 1039.57,-312.87 1049.22,-366.14\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"1045.74,-366.54 1050.87,-375.81 1052.64,-365.37 1045.74,-366.54\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- USEFULDEMAND_TOTAL&#45;&gt;USEFULDEMAND_TOTAL(&#45;1) -->\n",
       "<g id=\"edge74\" class=\"edge\">\n",
       "<title>USEFULDEMAND_TOTAL-&gt;USEFULDEMAND_TOTAL(-1)</title>\n",
       "<g id=\"a_edge74\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M755.84,-765.6C747.71,-766.26 739.28,-766.91 730.67,-767.54\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"730.57,-764.04 720.84,-768.25 731.07,-771.02 730.57,-764.04\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- USEFULDEMAND_TOTAL&#45;&gt;USEFULDEMAND_T2 -->\n",
       "<g id=\"edge13\" class=\"edge\">\n",
       "<title>USEFULDEMAND_TOTAL-&gt;USEFULDEMAND_T2</title>\n",
       "<g id=\"a_edge13\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M884.92,-735.46C901.04,-726.82 919.35,-715.62 934,-702.87 953.59,-685.83 950.61,-674.13 970,-656.87 981.33,-646.78 994.92,-637.52 1007.81,-629.74\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"1009.52,-632.8 1016.38,-624.73 1005.98,-626.76 1009.52,-632.8\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- USEFULDEMAND_TOTAL&#45;&gt;USEFULDEMAND_T3 -->\n",
       "<g id=\"edge7\" class=\"edge\">\n",
       "<title>USEFULDEMAND_TOTAL-&gt;USEFULDEMAND_T3</title>\n",
       "<g id=\"a_edge7\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M900.79,-735.38C927.74,-726.29 960.4,-715.27 988.6,-705.76\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"989.69,-709.09 998.05,-702.57 987.45,-702.45 989.69,-709.09\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- USEFULDEMAND_TOTAL&#45;&gt;USEFULDEMAND_T1 -->\n",
       "<g id=\"edge79\" class=\"edge\">\n",
       "<title>USEFULDEMAND_TOTAL-&gt;USEFULDEMAND_T1</title>\n",
       "<g id=\"a_edge79\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M934.24,-752.16C994.02,-748.33 1073.69,-737.93 1139,-710.87 1174.76,-696.05 1209.54,-668.15 1232.27,-647.52\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"1234.56,-650.16 1239.52,-640.8 1229.81,-645.03 1234.56,-650.16\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- TAU_T1 -->\n",
       "<g id=\"node40\" class=\"node\">\n",
       "<title>TAU_T1</title>\n",
       "<g id=\"a_node40\"><a xlink:title=\"TAU_T1\n",
       "Exogen\">\n",
       "<polygon fill=\"yellow\" stroke=\"black\" points=\"324,-494.87 259,-494.87 259,-458.87 324,-458.87 324,-494.87\"/>\n",
       "<text text-anchor=\"start\" x=\"265.5\" y=\"-472.67\" font-family=\"Times New Roman,serif\" font-size=\"14.00\" fill=\"blue\">TAU_T1:</text>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- TAU_T1&#45;&gt;SHARE_T3 -->\n",
       "<g id=\"edge3\" class=\"edge\">\n",
       "<title>TAU_T1-&gt;SHARE_T3</title>\n",
       "<g id=\"a_edge3\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M324.13,-478.47C415.61,-483.12 681.08,-496.59 793.14,-502.28\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"792.89,-505.78 803.05,-502.79 793.24,-498.79 792.89,-505.78\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- TAU_T1&#45;&gt;SHARE_T2 -->\n",
       "<g id=\"edge64\" class=\"edge\">\n",
       "<title>TAU_T1-&gt;SHARE_T2</title>\n",
       "<g id=\"a_edge64\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M315.62,-458.42C318.84,-455.63 322.05,-452.73 325,-449.87 401.06,-376.05 481.32,-279.3 518.42,-233.33\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"521.03,-235.67 524.57,-225.69 515.57,-231.29 521.03,-235.67\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "<!-- TAU_T1&#45;&gt;SHARE_T1 -->\n",
       "<g id=\"edge72\" class=\"edge\">\n",
       "<title>TAU_T1-&gt;SHARE_T1</title>\n",
       "<g id=\"a_edge72\"><a xlink:href=\"bogus\" xlink:title=\"NA\">\n",
       "<path fill=\"none\" stroke=\"black\" stroke-width=\"0.5\" d=\"M324.22,-473.63C417.65,-464.07 699.98,-434.98 934,-408.87 956.55,-406.35 981.49,-403.45 1002.72,-400.94\"/>\n",
       "<polygon fill=\"black\" stroke=\"black\" stroke-width=\"0.5\" points=\"1002.86,-404.45 1012.38,-399.8 1002.04,-397.5 1002.86,-404.45\"/>\n",
       "</a>\n",
       "</g>\n",
       "</g>\n",
       "</g>\n",
       "</svg>"
      ],
      "text/plain": [
       "<IPython.core.display.SVG object>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "mftt.drawmodel(size=(15,15))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Create some mock data\n",
    "The **%%dataframe** magic command helps dooing this. "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    " ### Initial values for the shares. \n",
    " Needed, as the lagged values are needed for the simulation to start "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>SHARE_T1</th>\n",
       "      <th>SHARE_T2</th>\n",
       "      <th>SHARE_T3</th>\n",
       "      <th>USEFULDEMAND_TOTAL</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>index</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>2021</th>\n",
       "      <td>0.3333</td>\n",
       "      <td>0.3333</td>\n",
       "      <td>0.3333</td>\n",
       "      <td>100.0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "       SHARE_T1  SHARE_T2  SHARE_T3  USEFULDEMAND_TOTAL\n",
       "index                                                  \n",
       "2021     0.3333    0.3333    0.3333               100.0"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "%%dataframe  startvalues  show  periods=1 \n",
    "     \n",
    "       SHARE_T1      SHARE_T2    SHARE_T3  USEFULDEMAND_TOTAL \n",
    "       0.33333        0.33333     0.33333             100"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    " ### Parameter values  \n",
    " Initial all the tecknologies are equal. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [],
   "source": [
    "%%dataframe  exoinit  nshow  periods=100 \n",
    "C_T1 C_T2 C_T3  TAU_T1 TAU_T2 TAU_T3 USEFULDEMAND_TOTAL_GROWTH SIGMA_T1 SIGMA_T2 SIGMA_T3\n",
    "4      4  4      3     3      3      2                              2        2       2 "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    " ### Combine the dataframe to one which can be solves "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th>index</th>\n",
       "      <th>2021</th>\n",
       "      <th>2022</th>\n",
       "      <th>2023</th>\n",
       "      <th>2024</th>\n",
       "      <th>2025</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>SHARE_T1</th>\n",
       "      <td>0.3333</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>SHARE_T2</th>\n",
       "      <td>0.3333</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>SHARE_T3</th>\n",
       "      <td>0.3333</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>USEFULDEMAND_TOTAL</th>\n",
       "      <td>100.0000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>C_T1</th>\n",
       "      <td>4.0000</td>\n",
       "      <td>4.0</td>\n",
       "      <td>4.0</td>\n",
       "      <td>4.0</td>\n",
       "      <td>4.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>C_T2</th>\n",
       "      <td>4.0000</td>\n",
       "      <td>4.0</td>\n",
       "      <td>4.0</td>\n",
       "      <td>4.0</td>\n",
       "      <td>4.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>C_T3</th>\n",
       "      <td>4.0000</td>\n",
       "      <td>4.0</td>\n",
       "      <td>4.0</td>\n",
       "      <td>4.0</td>\n",
       "      <td>4.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>TAU_T1</th>\n",
       "      <td>3.0000</td>\n",
       "      <td>3.0</td>\n",
       "      <td>3.0</td>\n",
       "      <td>3.0</td>\n",
       "      <td>3.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>TAU_T2</th>\n",
       "      <td>3.0000</td>\n",
       "      <td>3.0</td>\n",
       "      <td>3.0</td>\n",
       "      <td>3.0</td>\n",
       "      <td>3.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>TAU_T3</th>\n",
       "      <td>3.0000</td>\n",
       "      <td>3.0</td>\n",
       "      <td>3.0</td>\n",
       "      <td>3.0</td>\n",
       "      <td>3.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>USEFULDEMAND_TOTAL_GROWTH</th>\n",
       "      <td>2.0000</td>\n",
       "      <td>2.0</td>\n",
       "      <td>2.0</td>\n",
       "      <td>2.0</td>\n",
       "      <td>2.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>SIGMA_T1</th>\n",
       "      <td>2.0000</td>\n",
       "      <td>2.0</td>\n",
       "      <td>2.0</td>\n",
       "      <td>2.0</td>\n",
       "      <td>2.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>SIGMA_T2</th>\n",
       "      <td>2.0000</td>\n",
       "      <td>2.0</td>\n",
       "      <td>2.0</td>\n",
       "      <td>2.0</td>\n",
       "      <td>2.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>SIGMA_T3</th>\n",
       "      <td>2.0000</td>\n",
       "      <td>2.0</td>\n",
       "      <td>2.0</td>\n",
       "      <td>2.0</td>\n",
       "      <td>2.0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "index                          2021  2022  2023  2024  2025\n",
       "SHARE_T1                     0.3333   0.0   0.0   0.0   0.0\n",
       "SHARE_T2                     0.3333   0.0   0.0   0.0   0.0\n",
       "SHARE_T3                     0.3333   0.0   0.0   0.0   0.0\n",
       "USEFULDEMAND_TOTAL         100.0000   0.0   0.0   0.0   0.0\n",
       "C_T1                         4.0000   4.0   4.0   4.0   4.0\n",
       "C_T2                         4.0000   4.0   4.0   4.0   4.0\n",
       "C_T3                         4.0000   4.0   4.0   4.0   4.0\n",
       "TAU_T1                       3.0000   3.0   3.0   3.0   3.0\n",
       "TAU_T2                       3.0000   3.0   3.0   3.0   3.0\n",
       "TAU_T3                       3.0000   3.0   3.0   3.0   3.0\n",
       "USEFULDEMAND_TOTAL_GROWTH    2.0000   2.0   2.0   2.0   2.0\n",
       "SIGMA_T1                     2.0000   2.0   2.0   2.0   2.0\n",
       "SIGMA_T2                     2.0000   2.0   2.0   2.0   2.0\n",
       "SIGMA_T3                     2.0000   2.0   2.0   2.0   2.0"
      ]
     },
     "execution_count": 10,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "baseline = pd.concat([startvalues,exoinit],axis=1).fillna(0)\n",
    "baseline.head().T"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Solve the model "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {
    "scrolled": true
   },
   "outputs": [],
   "source": [
    "res = mftt(baseline,silent=1,first_test=100,init=True)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Create some scenarios\n",
    "In this case the cost of technology 2 (t2) is changed "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [],
   "source": [
    "for change_c_t2 in [0 , -1.0, -0.5, 0.5 , 1]:\n",
    "    alternative = baseline.upd(f'c_t2 + {change_c_t2}')\n",
    "    _ = mftt(alternative,keep = f'cost of tecknology 2 changed by {change_c_t2}')"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Create a gouping of variables for the visualizer\n",
    "The first group will automatic be displayed. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [],
   "source": [
    "mftt.group_dict = {\n",
    "    'share*' : 'Shares',\n",
    "    '*'      :  'all'\n",
    "}"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {
    "scrolled": false
   },
   "outputs": [
    {
     "data": {
      "application/vnd.jupyter.widget-view+json": {
       "model_id": "03abd3309a524c458ee978df960d9f98",
       "version_major": 2,
       "version_minor": 0
      },
      "text/plain": [
       "VBox(children=(HBox(children=(SelectMultiple(description='Select one or more', index=(0, 1, 2, 3), layout=Layoâ€¦"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    },
    {
     "data": {
      "text/plain": [
       " "
      ]
     },
     "execution_count": 14,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "mftt.keep_show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "celltoolbar": "Edit Metadata",
  "hide_input": false,
  "kernelspec": {
   "display_name": "Python 3 (ipykernel)",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.9.12"
  },
  "toc": {
   "base_numbering": 1,
   "nav_menu": {},
   "number_sections": true,
   "sideBar": true,
   "skip_h1_title": true,
   "title_cell": "Table of Contents",
   "title_sidebar": "Contents",
   "toc_cell": false,
   "toc_position": {
    "height": "496.25px",
    "left": "166px",
    "top": "110.156px",
    "width": "184.971px"
   },
   "toc_section_display": true,
   "toc_window_display": false
  },
  "varInspector": {
   "cols": {
    "lenName": 16,
    "lenType": 16,
    "lenVar": 40
   },
   "kernels_config": {
    "python": {
     "delete_cmd_postfix": "",
     "delete_cmd_prefix": "del ",
     "library": "var_list.py",
     "varRefreshCmd": "print(var_dic_list())"
    },
    "r": {
     "delete_cmd_postfix": ") ",
     "delete_cmd_prefix": "rm(",
     "library": "var_list.r",
     "varRefreshCmd": "cat(var_dic_list()) "
    }
   },
   "types_to_exclude": [
    "module",
    "function",
    "builtin_function_or_method",
    "instance",
    "_Feature"
   ],
   "window_display": false
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}
